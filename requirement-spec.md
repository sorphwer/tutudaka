# Tutudaka - 习惯打卡日历 📅

## 1. 项目概述

**Tutudaka** 是一个轻量级的习惯打卡日历应用，帮助用户追踪每日的生活习惯。

| 属性 | 说明 |
|------|------|
| 技术栈 | Next.js + TypeScript |
| 部署平台 | Vercel |
| 目标设备 | 仅移动端（竖屏 UI） |
| 语言 | 中文 |
| 主题 | 支持明/暗主题（跟随系统） |

---

## 2. 功能需求

### 2.1 页面布局

```
┌─────────────────────────┐
│      < 2025年1月 >      │  ← 月份标题 + 左右切换箭头
├─────────────────────────┤
│                         │
│                         │
│      📅 月历视图         │  ← 上方 3/4 区域
│      (每天显示彩色圆点)   │
│                         │
│                         │
├─────────────────────────┤
│   ☀️ 早起    🌙 早睡     │  
│   🥡 点外卖  🍜 出去吃    │  ← 下方 1/4 区域：任务清单
└─────────────────────────┘
```

### 2.2 四个习惯任务

| 任务 | 类型 | 颜色 | emoji |
|------|------|------|-------|
| 早起 | ✅ 正向（鼓励） | 可爱绿色 🟢 | ☀️ |
| 早睡 | ✅ 正向（鼓励） | 可爱绿色 🟢 | 🌙 |
| 点外卖 | ❌ 负向（避免） | 可爱红色 🔴 | 🥡 |
| 出去吃 | ❌ 负向（避免） | 可爱红色 🔴 | 🍜 |

### 2.3 月历视图

- 类似 iPhone 日历月视图风格，但更可爱
- 每个日期格子显示：
  - 日期数字（居中）
  - **四角圆点**表示任务完成情况：
    ```
        ●       ●      ← 左上：早起  右上：早睡
          [ 15 ]
        ●       ●      ← 左下：点外卖  右下：出去吃
    ```
  - 圆点只在任务**已完成时显示**，未完成不显示
  - 当天日期有特殊高亮样式
  - 被选中的日期有选中态样式

### 2.4 用户交互

| 操作 | 行为 |
|------|------|
| 点击左/右箭头 | 切换到上/下个月 |
| 点击某一天 | 选中该天，下方显示该天的任务详情 |
| 点击下方任务项 | 切换该任务的完成状态（已完成 ↔ 未完成） |

- ✅ 可以编辑任意历史日期的记录
- ✅ 随时可以自由修改

---

## 3. 技术架构

### 3.1 数据存储

```
Vercel Blob Storage
        ↓
    data.json  ← 所有打卡记录
```

**数据结构示例：**
```json
{
  "records": {
    "2025-01-15": {
      "earlyWake": true,
      "earlySleep": false,
      "takeout": true,
      "eatOut": false
    },
    "2025-01-16": {
      "earlyWake": true,
      "earlySleep": true,
      "takeout": false,
      "eatOut": false
    }
  }
}
```

### 3.2 认证机制

| 项目 | 说明 |
|------|------|
| 方式 | 单一密码保护 |
| 密码存储 | `.env` 文件（`PASSWORD=xxx`） |
| 登录状态 | Cookie 永久保持 |
| 验证流程 | 首次访问 → 弹出密码输入框 → 验证通过 → 设置 Cookie → 正常使用 |

### 3.3 环境变量

```env
# .env.local (添加到 .gitignore)
PASSWORD=your_password_here
BLOB_READ_WRITE_TOKEN=your_vercel_blob_token
```

### 3.4 API 设计

| 端点 | 方法 | 说明 |
|------|------|------|
| `/api/auth` | POST | 验证密码 |
| `/api/records` | GET | 获取指定月份的记录 |
| `/api/records` | POST | 更新某天的任务状态 |

---

## 4. UI/UX 设计规范

### 4.1 设计风格

- **整体风格**：可爱、简洁、现代
- **配色**：
  - 正向任务圆点：柔和的薄荷绿 / 草绿色
  - 负向任务圆点：柔和的珊瑚红 / 粉红色
  - 使用柔和、温暖的色调，避免过于鲜艳刺眼
- **图标**：大量使用 emoji 增加趣味性
- **圆角**：大圆角设计，增加亲和力
- **动效**：适当的过渡动画，点击有反馈

### 4.2 主题支持

| 模式 | 背景 | 文字 | 卡片 |
|------|------|------|------|
| 浅色 | 温暖米白 | 深灰 | 白色 |
| 深色 | 深蓝灰 | 浅灰 | 深灰 |

- 自动跟随系统主题切换

### 4.3 响应式

- 仅优化移动端竖屏体验
- 建议视口宽度：320px - 428px
- 桌面端访问时居中显示，最大宽度 428px

---

## 5. 项目结构

```
tutudaka/
├── app/
│   ├── api/
│   │   ├── auth/
│   │   │   └── route.ts        # 密码验证
│   │   └── records/
│   │       └── route.ts        # 记录 CRUD
│   ├── components/
│   │   ├── Calendar.tsx        # 月历组件
│   │   ├── DayCell.tsx         # 日期格子组件
│   │   ├── TaskList.tsx        # 任务清单组件
│   │   ├── TaskItem.tsx        # 单个任务组件
│   │   ├── PasswordModal.tsx   # 密码输入弹窗
│   │   └── Header.tsx          # 顶部月份切换
│   ├── hooks/
│   │   └── useRecords.ts       # 数据获取 Hook
│   ├── lib/
│   │   ├── blob.ts             # Vercel Blob 操作
│   │   └── auth.ts             # 认证相关
│   ├── types/
│   │   └── index.ts            # TypeScript 类型定义
│   ├── globals.css
│   ├── layout.tsx
│   └── page.tsx
├── .env.local                  # 环境变量（不提交）
├── .gitignore
├── package.json
└── README.md
```

---

## 6. 开发计划

### Phase 1: 基础框架 🏗️
- [x] 项目初始化
- [ ] 环境变量配置
- [ ] 基础布局搭建

### Phase 2: 核心功能 ⚙️
- [ ] 月历视图组件
- [ ] 任务清单组件
- [ ] 日期选择交互
- [ ] 任务状态切换

### Phase 3: 数据层 💾
- [ ] Vercel Blob 集成
- [ ] API 路由开发
- [ ] 数据读写逻辑

### Phase 4: 安全 & 认证 🔐
- [ ] 密码验证 API
- [ ] 密码输入弹窗
- [ ] Cookie 持久化

### Phase 5: 美化 & 优化 ✨
- [ ] 明暗主题适配
- [ ] 动效优化
- [ ] 移动端体验优化

---

## 7. 非功能需求

| 类别 | 要求 |
|------|------|
| 性能 | 首屏加载 < 2s |
| 兼容性 | iOS Safari, Android Chrome |
| 可访问性 | 基础无障碍支持 |
| 安全性 | 密码 HTTP-only Cookie |

---

## 8. 未来可能的扩展（暂不实现）

- 📊 统计功能（周/月完成率、连续打卡）
- 🔔 提醒功能
- 📱 PWA 离线支持
- 👥 多用户支持
- 🎨 自定义任务和颜色
